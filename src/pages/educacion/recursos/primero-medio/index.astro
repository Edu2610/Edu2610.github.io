---
import Layout from '../../../../layouts/Layout.astro';

// --- DATA: SECUENCIA 1 (INTRODUCCI√ìN) ---
const secuenciaUno = {
  titulo: "Secuencia 1: Naturaleza de los Racionales",
  proposito: "Comprender la equivalencia sem√°ntica entre fracciones y decimales, y establecer la simplificaci√≥n como est√°ndar de calidad.",
  pasos: [
    {
      step: "01",
      titulo: "Equivalencia",
      desc: "Conexi√≥n conceptual entre fracciones y decimales.",
      link: "/educacion/recursos/primero-medio/racionales-equivalencia",
      status: "Completado",
      color: "#34d399", // Menta
      icon: "‚öñÔ∏è"
    },
    {
      step: "02",
      titulo: "Transformaci√≥n",
      desc: "Algoritmos de conversi√≥n finita e infinita.",
      link: "/educacion/recursos/primero-medio/transformacion-decimal",
      status: "Completado",
      color: "#60a5fa", // Azul
      icon: "üîÑ"
    },
    {
      step: "03",
      titulo: "Simplificaci√≥n",
      desc: "La fracci√≥n irreducible como meta final.",
      link: "/educacion/recursos/primero-medio/simplificacion-fracciones",
      status: "Disponible",
      color: "#a78bfa", // P√∫rpura
      icon: "‚ú®"
    }
  ]
};

// --- DATA: SECUENCIA 2 (OPERATORIA - 6 CLASES) ---
const secuenciaDos = {
  titulo: "Secuencia 2: Operatoria y Eficiencia",
  proposito: "Desarrollar fluidez en las 4 operaciones, priorizando estrategias de ingenier√≠a (simplificaci√≥n previa) sobre algoritmos mec√°nicos.",
  pasos: [
    {
      step: "01",
      titulo: "Suma y Resta",
      desc: "Ingenier√≠a de la suma: MCM ('Hermano Mayor') vs Mariposa.",
      // Ruta basada en tu imagen
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_1", 
      status: "Planificado",
      color: "#fbbf24", // Amber (Inicio Op)
      icon: "‚ûï"
    },
    {
      step: "02",
      titulo: "Fluidez Mec√°nica",
      desc: "Entrenamiento de alta demanda y simplificaci√≥n obligatoria.",
      // Ruta basada en tu imagen
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_2", 
      status: "Planificado",
      color: "#f87171", // Rojo (Intensidad)
      icon: "‚è±Ô∏è"
    },
    {
      step: "03",
      titulo: "Desaf√≠os Reales",
      desc: "Aplicaci√≥n de suma/resta en contextos de ingenier√≠a.",
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_3", 
      status: "Planificado",
      color: "#34d399", 
      icon: "üèóÔ∏è"
    },
    {
      step: "04",
      titulo: "Producto y Divisi√≥n",
      desc: "Algoritmo org√°nico y la simplificaci√≥n cruzada.",
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_4", 
      status: "Planificado",
      color: "#60a5fa", 
      icon: "‚úñÔ∏è"
    },
    {
      step: "05",
      titulo: "Integrando los decimales",
      desc: "Integrando decimales y consolidando.",
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_5",
      status: "Planificado",
      color: "#818cf8", 
      icon: "üîç"
    },
    {
      step: "06",
      titulo: "Proyecto Escalas",
      desc: "Modelamiento a escala usando multiplicaci√≥n iterativa.",
      link: "/educacion/recursos/primero-medio/operatoria_fraccion_6",
      status: "Planificado",
      color: "#c084fc", 
      icon: "üìê"
    }
  ]
};
---

<Layout titulo="Primero Medio | Ruta de Aprendizaje">
  <div class="background-grid"></div>
  <div class="ambient-glow"></div>

  <main class="container">
    <header class="page-header">
      <a href="/educacion/recursos" class="btn-back">‚Üê Volver a Herramientas</a>
      <h1>Unidad 1: <span class="text-gradient">N√∫meros</span></h1>
      <p class="subtitle">
        Dominio del conjunto de los Racionales (‚Ñö) y estrategias de c√°lculo eficiente.
      </p>
    </header>

    <section class="sequence-wrapper">
      <div class="sequence-intro">
        <h2>{secuenciaUno.titulo}</h2>
        <p>{secuenciaUno.proposito}</p>
      </div>

      <div class="pipeline-container">
        {secuenciaUno.pasos.map((s, index) => {
          const nextStep = secuenciaUno.pasos[index + 1];
          const nextColor = nextStep ? nextStep.color : s.color;
          // L√≥gica: No dibujar l√≠nea si es el √∫ltimo de la fila (√≠ndice 2 en grid de 3) o el √∫ltimo total
          const showLine = index !== secuenciaUno.pasos.length - 1 && (index + 1) % 3 !== 0;

          return (
            <div class="pipeline-step" style={`--step-color: ${s.color}; --next-color: ${nextColor};`}>
              <div class="step-node">
                <span class="step-number">{s.step}</span>
                <div class="node-glow"></div>
              </div>
              {showLine && <div class="connector-line"></div>}
              <a href={s.link} class="step-card" target={s.link.endsWith('.pdf') ? "_blank" : "_self"}>
                <div class="card-bg-effect"></div>
                <div class="card-header">
                  <span class="step-icon">{s.icon}</span>
                  <span class="status-badge">{s.status}</span>
                </div>
                <h3>{s.titulo}</h3>
                <p>{s.desc}</p>
                <div class="hover-indicator">Ver material ‚Üí</div>
              </a>
            </div>
          )
        })}
      </div>
    </section>

    <section class="sequence-wrapper" style="margin-top: 6rem;">
      <div class="sequence-intro">
        <h2>{secuenciaDos.titulo}</h2>
        <p>{secuenciaDos.proposito}</p>
      </div>

      <div class="pipeline-container">
        {secuenciaDos.pasos.map((s, index) => {
          const nextStep = secuenciaDos.pasos[index + 1];
          const nextColor = nextStep ? nextStep.color : s.color;
          // L√≥gica: Cortar l√≠nea en el elemento 3 (√≠ndice 2) para que no conecte con la fila de abajo visualmente mal
          const showLine = index !== secuenciaDos.pasos.length - 1 && (index + 1) % 3 !== 0;

          return (
            <div class="pipeline-step" style={`--step-color: ${s.color}; --next-color: ${nextColor};`}>
              <div class="step-node">
                <span class="step-number">{s.step}</span>
                <div class="node-glow"></div>
              </div>
              {showLine && <div class="connector-line"></div>}
              <a href={s.link} class="step-card" target={s.link.endsWith('.pdf') ? "_blank" : "_self"}>
                <div class="card-bg-effect"></div>
                <div class="card-header">
                  <span class="step-icon">{s.icon}</span>
                  <span class="status-badge">{s.status}</span>
                </div>
                <h3>{s.titulo}</h3>
                <p>{s.desc}</p>
                <div class="hover-indicator">
                  {s.link === "#" ? "Pr√≥ximamente" : "Ver material ‚Üí"}
                </div>
              </a>
            </div>
          )
        })}
      </div>
    </section>

  </main>
</Layout>

<style>
  /* CONFIGURACI√ìN BASE */
  .container { max-width: 1200px; margin: 0 auto; padding: 4rem 1.5rem; position: relative; z-index: 1; }

  .page-header { margin-bottom: 4rem; text-align: center; }
  .btn-back { display: inline-block; color: var(--text-muted); text-decoration: none; margin-bottom: 1.5rem; font-size: 1rem; transition: color 0.3s; }
  .btn-back:hover { color: var(--accent-mint); }
  
  h1 { font-family: var(--font-heading); font-size: 3.5rem; margin-bottom: 0.8rem; letter-spacing: -1px; }
  .text-gradient { 
    background: linear-gradient(to right, #34d399, #a78bfa); 
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
  }
  .subtitle { color: var(--text-muted); font-size: 1.25rem; max-width: 650px; margin: 0 auto; line-height: 1.6; }

  /* FONDO */
  .background-grid {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10;
    background-color: #0f172a;
    background-image: radial-gradient(#334155 1px, transparent 1px);
    background-size: 30px 30px;
    opacity: 0.3;
  }
  .ambient-glow {
    position: fixed; top: 20%; left: 50%; transform: translateX(-50%);
    width: 600px; height: 600px;
    background: radial-gradient(circle, rgba(52, 211, 153, 0.15) 0%, transparent 70%);
    z-index: -5;
    pointer-events: none;
  }

  /* --- SEQUENCE INTRO BOX --- */
  .sequence-intro {
    background: rgba(30, 41, 59, 0.3);
    border-left: 4px solid var(--accent-mint);
    padding: 1.5rem 2rem;
    border-radius: 0 12px 12px 0;
    margin-bottom: 3rem;
    backdrop-filter: blur(5px);
  }
  .sequence-intro h2 { color: #f1f5f9; font-size: 1.5rem; margin-bottom: 0.5rem; font-family: var(--font-heading); }
  .sequence-intro p { color: #94a3b8; font-size: 1rem; line-height: 1.5; margin: 0; }

  /* --- PIPELINE CONTAINER (GRID) --- */
  .pipeline-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 Columnas */
    gap: 2rem;
    row-gap: 4rem; /* Espacio mayor entre filas */
    position: relative;
    width: 100%;
  }

  .pipeline-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    z-index: 1;
  }

  /* NODO */
  .step-node {
    width: 50px; height: 50px;
    background: #0f172a;
    border: 3px solid var(--step-color);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; color: var(--step-color);
    font-size: 1rem;
    position: relative; 
    z-index: 10;
    margin-bottom: 2rem;
    box-shadow: 0 0 15px color-mix(in srgb, var(--step-color), transparent 60%);
    transition: transform 0.3s;
  }
  .pipeline-step:hover .step-node { transform: scale(1.1); background: var(--step-color); color: #0f172a; }

  /* L√çNEA CONECTORA */
  .connector-line {
    position: absolute;
    top: 25px; 
    left: 50%; 
    height: 3px;
    background: linear-gradient(90deg, var(--step-color) 0%, var(--next-color) 100%);
    z-index: 0;
    width: calc(100% + 2rem); 
    opacity: 0.6;
    pointer-events: none;
  }

  /* TARJETA */
  .step-card {
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    padding: 1.5rem;
    width: 80%;
    text-align: left;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(12px);
    display: flex;
    flex-direction: column;
    height: 100%;
    z-index: 5;
  }

  .step-card:hover {
    transform: translateY(-8px);
    border-color: var(--step-color);
    box-shadow: 0 15px 40px -10px color-mix(in srgb, var(--step-color), transparent 80%);
    z-index: 20;
  }

  .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
  .step-icon { font-size: 1.5rem; }
  .status-badge { font-size: 0.7rem; font-weight: 700; text-transform: uppercase; background: rgba(255,255,255,0.1); padding: 4px 8px; border-radius: 6px; color: #cbd5e1; }

  h3 { color: #f8fafc; font-size: 1.2rem; margin-bottom: 0.5rem; font-family: var(--font-heading); font-weight: 600; }
  p { color: #94a3b8; font-size: 0.95rem; line-height: 1.5; margin-bottom: auto; }

  .hover-indicator { 
    margin-top: 1.5rem;
    font-size: 0.85rem; font-weight: 700; color: var(--step-color); 
    opacity: 0; transform: translateX(-10px); transition: all 0.3s; 
  }
  .step-card:hover .hover-indicator { opacity: 1; transform: translateX(0); }

  /* RESPONSIVE */
  @media (max-width: 1024px) {
    .pipeline-container { 
      grid-template-columns: 1fr; 
      gap: 0;
    }
    .pipeline-step { 
      flex-direction: row; 
      align-items: flex-start; 
      gap: 1.5rem; 
      padding-bottom: 3.5rem; 
    }
    
    .step-node { margin-bottom: 0; flex-shrink: 0; }
    
    /* En m√≥vil la l√≠nea es vertical y continua */
    .connector-line {
      top: 50px; left: 25px; 
      width: 3px; height: 100%; 
      transform: none;
      background: linear-gradient(180deg, var(--step-color) 0%, var(--next-color) 100%);
    }
  }
</style>